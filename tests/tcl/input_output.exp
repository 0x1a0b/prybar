#!/usr/bin/expect -f

set timeout -1
spawn ./prybar-tcl -q -i
match_max 100000
expect -exact "--> "
send -- "s"
expect -exact "\r--> s\[0K\r\[5C"
send -- "e"
expect -exact "\r--> se\[0K\r\[6C"
send -- "t"
expect -exact "\r--> set\[0K\r\[7C"
send -- " "
expect -exact "\r--> set \[0K\r\[8C"
send -- "i"
expect -exact "\r--> set i\[0K\r\[9C"
send -- "n"
expect -exact "\r--> set in\[0K\r\[10C"
send -- "p"
expect -exact "\r--> set inp\[0K\r\[11C"
send -- " "
expect -exact "\r--> set inp \[0K\r\[12C"
send -- "\["
expect -exact "\r--> set inp \[\[0K\r\[13C"
send -- "g"
expect -exact "\r--> set inp \[g\[0K\r\[14C"
send -- "e"
expect -exact "\r--> set inp \[ge\[0K\r\[15C"
send -- "t"
expect -exact "\r--> set inp \[get\[0K\r\[16C"
send -- "s"
expect -exact "\r--> set inp \[gets\[0K\r\[17C"
send -- " "
expect -exact "\r--> set inp \[gets \[0K\r\[18C"
send -- "s"
expect -exact "\r--> set inp \[gets s\[0K\r\[19C"
send -- "t"
expect -exact "\r--> set inp \[gets st\[0K\r\[20C"
send -- "d"
expect -exact "\r--> set inp \[gets std\[0K\r\[21C"
send -- "i"
expect -exact "\r--> set inp \[gets stdi\[0K\r\[22C"
send -- "n"
expect -exact "\r--> set inp \[gets stdin\[0K\r\[23C"
send -- "\]"
expect -exact "\r--> set inp \[gets stdin\]\[0K\r\[24C"
send -- "\r"
expect -exact "\r--> set inp \[gets stdin\]\[0K\r\[24C\r
"
send -- "hellooooooo\r"
expect -exact "hellooooooo\r
hellooooooo\r
--> "
send -- "p"
expect -exact "\r--> p\[0K\r\[5C"
send -- "u"
expect -exact "\r--> pu\[0K\r\[6C"
send -- "t"
expect -exact "\r--> put\[0K\r\[7C"
send -- "s"
expect -exact "\r--> puts\[0K\r\[8C"
send -- " "
expect -exact "\r--> puts \[0K\r\[9C"
send -- "\$"
expect -exact "\r--> puts \$\[0K\r\[10C"
send -- "i"
expect -exact "\r--> puts \$i\[0K\r\[11C"
send -- "n"
expect -exact "\r--> puts \$in\[0K\r\[12C"
send -- "p"
expect -exact "\r--> puts \$inp\[0K\r\[13C"
send -- "\r"
expect -exact "\r--> puts \$inp\[0K\r\[13C\r
hellooooooo\r\r
\r
--> "
send -- ""
expect eof
